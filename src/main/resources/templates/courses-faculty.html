<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8" />
    <title>Student Applications</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link th:rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" />
    <link rel="stylesheet" th:href="@{/css/font-awesome.min.css}" />
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet"/>

    <style>
        body {
            margin: 0;
            font-family: Montserrat, sans-serif;
            background-image: url('https://i.ibb.co/pBq6Gwtv/BB2-Main-Campus-II.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
        }

        header {
            background-color: white;
            padding: 10px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo-left, .logo-right {
            height: 60px;
        }
         nav {
            background-color: #800000;
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 12px 0;
            font-weight: bold;
            font-style: Montserrat;
        }

        nav a {
            text-decoration: none;
            color: white;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        nav a.active {
            color: gold;
        }

        .main-content {
            padding: 40px;
        }
         .logout-btn {
            background-color: darkred;
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
        }

        .table-container {
            background-color: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 20px;
        }

        .custom-table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            color: #333;
        }

        .custom-table thead {
            background-color: #800000;
            color: white;
            font-weight: bold;
        }

        .custom-table th, .custom-table td {
            padding: 15px 20px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .custom-table tbody tr:hover {
            background-color: #f2f2f2;
        }

        .custom-table a {
            color: #800000;
            font-weight: bold;
            text-decoration: none;
        }

        .custom-table a:hover {
            text-decoration: underline;
        }

        h2.section-title {
            color: #800000;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            font-style:Montserrat;
            background: #ffffff;
            border-radius: 10px;
            padding: 8px 15px;
            font-size: 30px;

        }
        
        .user-info {
        display: flex;
        align-items: center;
        gap: 15px;
        color: darkred;
        font-weight: bold;
        }

        .profile-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }
    </style>
</head>
<body>

<!-- HEADER -->
<header>
    <img src="https://i.ibb.co/6crbNVrc/Bat-State-U-NEU-Logo-1.png" class="logo-left">
    <img src="https://i.ibb.co/TDW6nq5d/image-removebg-preview.png" class="logo-right">
  <div class="user-info" sec:authorize="isAuthenticated()">
        <img th:if="${profile.profilePhoto != null and profile.profilePhoto != ''}"
             th:src="@{'/photos/faculty/' + ${profile.userAccountId} + '/' + ${profile.profilePhoto}}"
             alt="Profile"
             class="profile-avatar"/>
        <span th:text="${profile.firstName + ' ' + profile.lastName}">User Name</span>
        <button class="logout-btn" onclick="window.location.href='/logout'">Logout</button>
</div>
</header>
<!-- NAVIGATION -->
<nav>
    <a sec:authorize="hasAuthority('Student')" th:href="@{/dashboard/}"><i class="fas fa-search"></i>Search for Jobs</a>
    <a sec:authorize="hasAuthority('Student')" th:href="@{/saved-jobs/}"><i class="fa-solid fa-eye"></i> Saved</a>
    <a sec:authorize="hasAuthority('Student')"  th:href="@{/job-seeker-profile/}"><i class="fa-solid fa-pencil"></i> Edit Profile</a>
    <a sec:authorize="hasAuthority('Recruiter')" th:href="@{/dashboard/add}"><i class="fa-solid fa-file-circle-plus"></i> Post</a>
    <a sec:authorize="hasAuthority('Recruiter')" th:href="@{/dashboard/}"><i class="fa-solid fa-eye"></i> View Jobs</a>
    <a sec:authorize="hasAuthority('Recruiter')" th:href="@{/recruiter-profile/}"><i class="fa-solid fa-pencil"></i> Edit Account</a>
    <a sec:authorize="hasAuthority('Faculty')" class= "active" th:href="@{/courses-faculty}"><i class="fa-solid fa-folder"></i> Course</a>
  <a sec:authorize="hasAuthority('Faculty')" th:href="@{/dashboard/}"><i class="fa-solid fa-book"></i> Internship Application</a>
  <a sec:authorize="hasAuthority('Faculty')"  th:href="@{/faculty-profile/}"><i class="fa-solid fa-pencil"></i> Edit Account</a>


</nav>
<!-- MAIN CONTENT -->
<div class="main-content">
    <h2 class="section-title">Student Applications</h2>
    <div class="table-container">
        <table class="custom-table">
            <thead>
                <tr>
                    <th>Student Name</th>
                    <th>Company</th>
                    <th>Status</th>
                    <th>View</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="entry : ${studentApplications}">
                    <td th:text="${entry.key.firstName + ' ' + entry.key.lastName}"></td>
                    <td>
                        <span th:each="app : ${entry.value}" th:text="${app.job?.jobCompanyId?.name} ?: 'N/A'"></span>
                    </td>
                    <td>
                        <span th:each="app : ${entry.value}" th:text="${app.status}"></span>
                    </td>
                    <td>
                        <a th:each="app : ${entry.value}" th:href="@{/job-details-apply/{id}(id=${app.job?.jobPostId})}">View</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- JS -->
<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
<script th:src="@{/webjars/popper.js/umd/popper.min.js}"></script>
<script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>

</body>
</html>
